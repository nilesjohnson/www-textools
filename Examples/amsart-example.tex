\documentclass[amssymb,amsfonts]{amsart}
\usepackage{amssymb, latexsym}
\usepackage[T1]{fontenc}
% So that the accented characters are dealt with correctly
%\usepackage[intlimits,sumlimits,noDcommand,narrowiints]{kpfonts}
\usepackage[english]{babel}
%\usepackage{microtype}
%\usepackage{svn}
\usepackage[notref,notcite]{showkeys}
%\usepackage{changes}
% The changes package allows editing marks (addition, deletion,
% replacement) with attribution to author(s). See CTAN
%\usepackage{empheq}
% Empheq 'emphasizes equations', and gives a visual markup extension
% to amsmath. In particular you can have a left braced set of
% equations number individually. See CTAN for details
%\usepackage{tensor}
% The tensor package allows left indices and auto-justified/spaced
% sub/super scripts. See Documentation in CTAN
%\usepackage{bbm}
% Provides blackboard characters for other than upper-case latin
%\usepackage{constants}
% Constants provide a way to automatically number constant/error
% terms.
\usepackage{hyperref}
% Remember to replace when done!
%\usepackage{www_math_commands}


\title[short title]{long title}
\author[WWY Wong]{Willie Wai Yeung Wong}
%\address{Michigan State University}
\thanks{other thanks}
%\email{wongwwy@member.ams.org}
%\subjclass[2000]{MSC, look up on AMS}


\theoremstyle{plain} % bold environment name, italic text
\newtheorem{thm}{Theorem}[section]
\newtheorem*{thm*}{Theorem}
\newtheorem{prop}[thm]{Proposition}
\newtheorem*{prop*}{Proposition}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{cor}[thm]{Corollary}

\theoremstyle{definition} % bold environment name, plain text
\newtheorem{defn}[thm]{Definition}
\newtheorem{example}[thm]{Example}
\newtheorem{notation}[thm]{Notation}


\theoremstyle{remark} % italic environment name, plain text
\newtheorem{rmk}[thm]{Remark}

\newtheorem*{note}{Note}

%% This makes equations follow the theorem counter
\makeatletter\let\c@equation\c@thm\makeatother
%% This makes figures follow the theorem counter
\makeatletter\let\c@figure\c@thm\makeatother





%%
%%  standard document stuff above here
%%  special stuff below
%%






\usepackage{../checkdependencies}








\usepackage{lipsum}


%\renewcommand{label}[1]{\desclabel{#1}{#1}}

\begin{document}

%% redefine ref for tracking dependencies


\let\bareref\ref 
\renewcommand*\ref[1]{\bareref{#1}\writeref{#1}}


\begin{abstract}
\end{abstract}




\maketitle




\section{First section}

\lipsum[1-2]

\begin{align}\label{eqA}
C &= D \\
C' &= D' \label{eq001}
\end{align}

\ref{eq001} 

\begin{subequations}
\begin{align}
E &= F \label{eq002}\\
E' &= F' \label{eq003}
\end{align}

some text

\begin{equation}\label{eq1}
	A = B
\end{equation}
\end{subequations}

\begin{prop}\label{someprop}
   Text
\end{prop}

\begin{thm}\label{thm1}
	\lipsum[27]

	test
\end{thm}

\lipsum[1]

\begin{proof}
\proofof{thm1}
THis is how it goes.
\begin{lem}[Step 1]\label{parastep}
	\lipsum[9-10]

	And this is sufficient.

\section{section split}

\end{lem}
Then we can apply \ref{eq1} and \ref{someprop} to get the final answer.
Here ends the proof.
\end{proof}

\begin{rmk}\label{rmk1}
	\lipsum[27]

	test
\end{rmk}

\begin{cor}\label{cor1}
	\lipsum[24]

	text
\end{cor}

\begin{pfof}{cor1}
	By using \ref{rmk1}\writeref{rmk1}, we see that \ref{eq1} in fact implies something else. Thus the arguments in \ref{parastep} is in fact good enough to show the strengthened results. 
\end{pfof}

\begin{equation}
	C = D
\end{equation}

\section{A section on techniques}

Before doing anything else, let us recall \ref{thm1}. Also let's try \ref{parastep}.

\lipsum[2]

\begin{equation}
	A = B
\end{equation}

\lipsum[3-8]



%\section{Another section}

\lipsum[5-9]

Some text \cite{Wong2009}.


\section{Second section}


\lipsum[10-23]

\begin{equation}
K = \frac12 mv^2
\end{equation}

This is it.


%\bibliographystyle{amsalpha}
%\bibliography{mixmaster.bib}

\end{document}
